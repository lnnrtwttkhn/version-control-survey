---
title: "index.qmd"
format: html
engine: knitr
execute-dir: project
---

```{r}
library("formr")
library("here")
library("ggplot2")
path_password <- here::here("code", ".passwords.R")
if ( file.exists(path_password) ) {
  source(path_password)
} else {
  credentials$email <- Sys.getenv("FORMR_EMAIL")
  credentials$password <- Sys.getenv("FORMR_PASS")
}
survey_name <- "surveytest"
formr::formr_connect(credentials$email, credentials$password)
survey_items <- formr_items(survey_name = survey_name, host = "https://formr.org")
survey_data <- formr::formr_raw_results(survey_name = survey_name)
ggplot(data = survey_data, aes(x = version)) +
  geom_bar(stat = "count") +
  geom_text(stat = "count", aes(label = after_stat(count)), vjust = -1) +
  xlab("Responses") +
  ylab("Count")
```
